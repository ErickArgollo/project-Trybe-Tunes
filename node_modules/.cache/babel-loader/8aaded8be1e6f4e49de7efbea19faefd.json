{"ast":null,"code":"var _jsxFileName = \"/home/erick/Documentos/Projetos github/project-Trybe-Tunes/src/components/MusicCard.jsx\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport './style/MusicCard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MusicCard extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isLoading: false,\n      isFavorite: false,\n      favoriteList: ''\n    };\n\n    this.takeFavoriteList = async () => {\n      const favorites = await getFavoriteSongs();\n      this.setState({\n        favoriteList: favorites\n      }, this.isFavorite);\n    };\n\n    this.isFavorite = () => {\n      const {\n        favoriteList\n      } = this.state;\n      const {\n        song\n      } = this.props;\n      const search = favoriteList.some(e => +e.trackId === +song.trackId);\n\n      if (search) {\n        this.setState({\n          isFavorite: true\n        });\n      }\n    };\n\n    this.favoriteSongs = async event => {\n      const {\n        update\n      } = this.props;\n      const {\n        value,\n        checked\n      } = event.target;\n\n      if (checked) {\n        this.setState({\n          isLoading: true\n        });\n        await addSong(JSON.parse(value));\n        this.setState({\n          isLoading: false,\n          isFavorite: true\n        });\n        update();\n      } else {\n        this.setState({\n          isLoading: true\n        });\n        await removeSong(JSON.parse(value));\n        this.setState({\n          isLoading: false,\n          isFavorite: false\n        });\n        update();\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.takeFavoriteList();\n  }\n\n  render() {\n    const {\n      song\n    } = this.props;\n    const {\n      isLoading,\n      isFavorite,\n      oi\n    } = this.state;\n    console.log(oi);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"song\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        type: \"none\",\n        className: \"ul-songs\",\n        children: !isLoading ? /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"test\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"song-name\",\n            children: song.trackName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"audio-container\",\n            children: /*#__PURE__*/_jsxDEV(\"audio\", {\n              \"data-testid\": \"audio-component\",\n              src: song.previewUrl,\n              controls: true,\n              className: \"audio\",\n              children: [/*#__PURE__*/_jsxDEV(\"track\", {\n                kind: \"captions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 23\n              }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n                children: \"audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkbox-container\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: song.trackId,\n              \"data-testid\": `checkbox-music-${song.trackId}`,\n              className: \"material-icons favorite\",\n              style: {\n                color: isFavorite ? 'red' : 'gray'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                onChange: this.favoriteSongs,\n                value: JSON.stringify(song),\n                checked: isFavorite,\n                id: song.trackId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 23\n              }, this), \"favorite\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nMusicCard.propTypes = {\n  update: PropTypes.func.isRequired,\n  song: PropTypes.shape({\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.number.isRequired,\n    trackName: PropTypes.string.isRequired\n  }).isRequired\n};","map":{"version":3,"names":["PropTypes","React","Component","addSong","getFavoriteSongs","removeSong","MusicCard","state","isLoading","isFavorite","favoriteList","takeFavoriteList","favorites","setState","song","props","search","some","e","trackId","favoriteSongs","event","update","value","checked","target","JSON","parse","componentDidMount","render","oi","console","log","trackName","previewUrl","color","stringify","propTypes","func","isRequired","shape","string","number"],"sources":["/home/erick/Documentos/Projetos github/project-Trybe-Tunes/src/components/MusicCard.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport './style/MusicCard.css';\n\nexport default class MusicCard extends Component {\n  state = {\n    isLoading: false,\n    isFavorite: false,\n    favoriteList: '',\n  };\n\n  componentDidMount() {\n    this.takeFavoriteList();\n  }\n\n  takeFavoriteList = async () => {\n    const favorites = await getFavoriteSongs();\n    this.setState({ favoriteList: favorites }, this.isFavorite);\n  };\n\n  isFavorite = () => {\n    const { favoriteList } = this.state;\n    const { song } = this.props;\n    const search = favoriteList.some((e) => +e.trackId === +song.trackId);\n    if (search) {\n      this.setState({ isFavorite: true });\n    }\n  };\n\n  favoriteSongs = async (event) => {\n    const { update } = this.props;\n    const { value, checked } = event.target;\n    if (checked) {\n      this.setState({ isLoading: true });\n      await addSong(JSON.parse(value));\n      this.setState({ isLoading: false, isFavorite: true });\n      update();\n    } else {\n      this.setState({ isLoading: true });\n      await removeSong(JSON.parse(value));\n      this.setState({ isLoading: false, isFavorite: false });\n      update();\n    }\n  };\n\n  render() {\n    const { song } = this.props;\n    const { isLoading, isFavorite, oi } = this.state;\n    console.log(oi);\n    return (\n      <div className=\"song\">\n        <ul type=\"none\" className=\"ul-songs\">\n          {\n            !isLoading\n              ? (\n                <li className=\"test\">\n                  <span className=\"song-name\">{song.trackName}</span>\n                  <div className=\"audio-container\">\n                    <audio\n                      data-testid=\"audio-component\"\n                      src={ song.previewUrl }\n                      controls\n                      className=\"audio\"\n                    >\n                      <track kind=\"captions\" />\n                      O seu navegador n√£o suporta o elemento\n                      <code>audio</code>\n                    </audio>\n                  </div>\n                  <div className=\"checkbox-container\">\n                    <label\n                      htmlFor={ song.trackId }\n                      data-testid={ `checkbox-music-${song.trackId}` }\n                      className=\"material-icons favorite\"\n                      style={ {\n                        color: isFavorite ? 'red' : 'gray',\n                      } }\n                    >\n                      <input\n                        type=\"checkbox\"\n                        onChange={ this.favoriteSongs }\n                        value={ JSON.stringify(song) }\n                        checked={ isFavorite }\n                        id={ song.trackId }\n                      />\n\n                      favorite\n                    </label>\n                  </div>\n                </li>)\n              : <div className=\"loading\" />\n\n          }\n\n        </ul>\n      </div>\n\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  update: PropTypes.func.isRequired,\n  song: PropTypes.shape({\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.number.isRequired,\n    trackName: PropTypes.string.isRequired,\n  }).isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}